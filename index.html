

<!DOCTYPE html>
<meta charset="utf-8">
<style>

.node  {
  stroke: #fff;
  stroke-width: 5px;
}
/*.node text{
  pointer-events: none;
  font: 10px sans-serif;
}*/
.link {
  stroke: #999;
  stroke-opacity: .6;
}

table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
th, td {
    padding: 5px;
    text-align: left;
}

</style>

<body>
		<fieldset>
				<legend id="type">Select method:</legend>
				
				<input type="radio" name="method" value="ant" onchange="updateTotalM(this)"> Ant algorithm<Br>
				
		   	<input type="radio" name="method" value="d" onchange="updateTotalM(this)"> Dijkstra algorithm<Br>
	 	</fieldset>	
	 		
 		<fieldset id="task_ant" style="display: none">
 			
 				
			<legend id="type">Select task type:</legend>
			<input type="radio" name="load" value="yes" onchange="updateTotal(this)"> Load from file<Br>
			
	   	<input type="radio" name="load" value="no"	onchange="updateTotal(this)"> Create random full task<Br>
 		</fieldset>	
 		
 		<fieldset id="task_d" style="display: none">
			<legend id="type">Select task type:</legend>
			<input type="radio" name="load" value="yes" onchange="updateTotalD(this)"> Load from file<Br>
			
	   	<input type="radio" name="load" value="no"	onchange="updateTotalD(this)"> Create random full task<Br>
 		</fieldset>	
   	
   	<fieldset id="loadfile" style="display: none">
   		<form method="get">
   				<input type="hidden" name="method" value="ant">
 			<input type="hidden" name="customtask" value="ct"> <Br>
 			<legend id="tipcolor">Input data</legend>
			Enter alpha:
			<input name="alpha" title="Enter alpha:" min="0.1" value="0.3"></input><Br>	
			Enter beta:
			<input name="beta" title="Enter beta:" min="0.1" value="0.3"></input><Br>	
			Enter decay rate:
			<input name="decay" title="Enter decay rate:" min="0.5" value="0.9"></input><Br>
			Number of runnings:
			<input name="run" title="Runnings number:" min="1" value="5"></input><Br>	
			Number of colonies:
			<input name="numCol" title="Runnings number:" min="10" value="500"></input><Br>	
 			<select name="task">
				  <option value=1>Task 1 [4,8]</option>
				  <option value=2>Task 2 [5,17]</option>
				  <option value=3>Task 3 [8,38]</option>
				  <option value=4>Task 4 [10,10]</option>
				  <option value=5>Task 5 [10,15]</option>
				  <option value=6>Task 6 [15,15]</option>
				  <option value=7>Task 7 [10,20]</option>
				  <option value=8>Task 8 [10,30]</option>
				  <option value=9>Task 9 [10,40]</option>
				  <option value=10>Task 10 [10,50]</option>
			</select><Br>
			<input type='submit'  value="Submit">
			</form>
 		</fieldset>	
 		
 		<fieldset id="loadfile_d" style="display: none">
   		<form method="get">
 			<input type="hidden" name="customtask" value="ct"> <Br>
 				
 			<input type="hidden" name="method" value="d">
 			<select name="task">
				  <option value=1>Task 1 [4,8]</option>
				  <option value=2>Task 2 [5,17]</option>
				  <option value=3>Task 3 [8,38]</option>
				  <option value=4>Task 4 [10,10]</option>
				  <option value=5>Task 5 [10,15]</option>
				  <option value=6>Task 6 [15,15]</option>
				  <option value=7>Task 7 [10,20]</option>
				  <option value=8>Task 8 [10,30]</option>
				  <option value=9>Task 9 [10,40]</option>
				  <option value=10>Task 10 [10,50]</option>
			</select><Br>
			<input type='submit'  value="Submit">
			</form>
			
 		</fieldset>	
 		
		<fieldset id="random" style="display: none">
			<form method="get">
 				
 			<input type="hidden" name="method" value="ant">	
      <legend id="tipcolor">Input data</legend>
			Enter amount of terminal vertexes:
			<input name="Terminal" title="Enter amount of terminal vertexes:" min="2" value="5"></input> <br>
			Enter overall amount of vertexes:
			<input name="amountV" title="Enter overall amount of vertexes:" min="3" value="17"></input><Br>
			Enter alpha:
			<input name="alpha" title="Enter alpha:" min="0.1" value="1.1"></input><Br>	
			Enter beta:
			<input name="beta" title="Enter beta:" min="0.1" value="3"></input><Br>	
			Enter decay rate:
			<input name="decay" title="Enter decay rate:" min="0.5" value="0.9"></input><Br>		
			Number of runnings:
			<input name="run" title="Runnings number:" min="1" value="5"></input><Br>	
			Number of colonies:
			<input name="numCol" title="Runnings number:" min="10" value="500"></input><Br>	
	   	<input type="hidden" name="customtask" value="ft"> <Br>
   		<input type='submit'  value="Submit">
   		</form>
 		</fieldset>
 		
 		<fieldset id="random_d" style="display: none">
			<form method="get">
 				
 			<input type="hidden" name="method" value="d">
        <legend id="tipcolor">Input data</legend>
			Enter amount of terminal vertexes:
			<input name="Terminal" title="Enter amount of terminal vertexes:" min="2" value="5"></input> <br>
			Enter overall amount of vertexes:
			<input name="amountV" title="Enter overall amount of vertexes:" min="3" value="17"></input><Br>
	   	<input type="hidden" name="customtask" value="ft"> <Br>
   		<input type='submit'  value="Submit">
   		</form>
 		</fieldset>
	<script>
	function hideOthers(selectedValue) {
		    var loadfile = document.getElementById('loadfile'),
		        random = document.getElementById('random'),
		        random_d = document.getElementById('random_d');
		      
		    if(selectedValue === 'yes') {
		        random.style.display = 'none';
		        random_d.style.display = 'none';
		        loadfile.style.display = 'block';
		    } else if(selectedValue === 'no') {
	        	random.style.display = 'block';
	        	random_d.style.display = 'none';
		        loadfile.style.display = 'none';
		    }
		    
		}
		function hideOthersM(selectedValue) {
		    var method = document.getElementById('method'),
		   			loadfile = document.getElementById('loadfile'),
		   			loadfile_d = document.getElementById('loadfile_d'),
		   			random = document.getElementById('random'),
		   			random_d = document.getElementById('random_d');
		   			task_ant = document.getElementById('task_ant'),
		        task_d = document.getElementById('task_d');
		    
		    random.style.display = 'none';   
		    loadfile.style.display = 'none';  
		    loadfile_d.style.display = 'none'; 
		    random_d.style.display = 'none';
		    
		    if(selectedValue === 'ant') {
		        task_ant.style.display = 'block';
		        task_d.style.display = 'none';
		    } else if(selectedValue === 'd') {
		        task_d.style.display = 'block';
		       	task_ant.style.display = 'none';
		    }
		}
		function hideOthersD(selectedValue) {
		    var loadfile = document.getElementById('loadfile'),
		        loadfile_d = document.getElementById('loadfile_d'),
		        random = document.getElementById('random'),
		        random_d = document.getElementById('random_d');
		     
		     random.style.display = 'none';
		     loadfile.style.display = 'none';
		    
		    if(selectedValue === 'yes') {
		        random_d.style.display = 'none';
		        loadfile_d.style.display = 'block';
		    } else if(selectedValue === 'no') {
	        	random_d.style.display = 'block';
		        loadfile_d.style.display = 'none';
		    }
		}
		function updateTotal(input) {
		   hideOthers(input.value);
		}
		function updateTotalM(input) {
		   hideOthersM(input.value);
		}
		function updateTotalD(input) {
		   hideOthersD(input.value);
		}
		</script>	




<?php 
	include_once "Class/Main.php";
?>
<script src="//d3js.org/d3.v3.min.js"></script>
<script>

var width = 1200,
    height = 1000;

var color = d3.scale.category20();

var force = d3.layout.force()
    .charge(-120) //120
    .linkDistance(function(d) { return  d.value*20; }) //30
    .size([width, height]);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .append('g');

d3.json("miserables.json", function(error, graph) {
  if (error) throw error;

  force
      .nodes(graph.nodes)
      .links(graph.links)
      .start();

  var link = svg.selectAll(".link")
      .data(graph.links)
    .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value*1/20); });
 
 var edgepaths = svg.selectAll(".edgepath")
        .data(graph.links)
        .enter()
        .append('path')
        .attr({'d': function(d) {return 'M '+d.source.x+' '+d.source.y+' L '+ d.target.x +' '+d.target.y},
               'class':'edgepath',
               'fill-opacity':0,
               'stroke-opacity':0,
               'fill':'blue',
               'stroke':'red',
               'id':function(d,i) {return 'edgepath'+i}})
        .style("pointer-events", "none");
 
 	var edgelabels = svg.selectAll(".edgelabel")
        .data(graph.links)
        .enter()
        .append('text')
        .style("pointer-events", "none")
        .attr({'class':'edgelabel',
               'id':function(d,i){return 'edgelabel'+i},
               'dx':80,
               'dy':20,
               'font-size':16,
               'fill':'#aaa'});

    edgelabels.append('textPath')
        .attr('xlink:href',function(d,i) {return '#edgepath'+i})
        .style("pointer-events", "none")
        .text(function(d,i){return d.value;});
 	
  var node = svg.selectAll(".node")
      .data(graph.nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 15)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);
      
	var nodelabels = svg.selectAll(".nodelabel") 
	       .data(graph.nodes)
	       .enter()
	       .append("text")
	       .attr({"x":function(d){return d.x;},
	              "y":function(d){return d.y;},
	              "class":"nodelabel",
	              "stroke":"black"})
	       .text(function(d){return d.name;});
  
  /*node.append("text")
  .attr("x", 0)
    .attr("dy", ".35em")
  		.attr("text-anchor", "middle")
      .text(function(d) { return d.name; });*/

  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });
		 
		  edgepaths.attr('d', function(d) { var path='M '+d.source.x+' '+d.source.y+' L '+ d.target.x +' '+d.target.y;
                                           //console.log(d)
                                           return path});       

        edgelabels.attr('transform',function(d,i){
            if (d.target.x<d.source.x){
                bbox = this.getBBox();
                rx = bbox.x+bbox.width/2;
                ry = bbox.y+bbox.height/2;
                return 'rotate(180 '+rx+' '+ry+')';
                }
            else {
                return 'rotate(0)';
                }
        });
              
    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
        
    nodelabels.attr("x", function(d) { return d.x+20; }) 
              .attr("y", function(d) { return d.y; });
              
  });
});

</script>


